<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Page SEO (no dataset schema, no robots/sitemap) -->
  <link rel="canonical" href="https://aussiedatagal.github.io/nsw-rent-bond-refunds/">
  <meta name="description" content="Postcode-level summary of NSW rental bond outcomes (2024). Sort and filter by withholding rates, tenancy length, total bond, and dwelling type to explore local patterns.">

  <!-- Share cards -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="NSW Rental Bond Refunds — 2024">
  <meta property="og:description" content="Explore postcode-level rental bond outcomes across NSW, with sorting and filters.">
  <meta property="og:url" content="https://aussiedatagal.github.io/nsw-rent-bond-refunds/">
  <meta name="twitter:card" content="summary">

  <!-- Counter.dev (privacy-friendly, cookieless analytics) -->
  <script src="https://cdn.counter.dev/script.js"
          data-id="2fd9f514-57b3-4a7e-bcab-1f565aff04d0"
          data-utcoffset="10"
          defer></script>

  <title>NSW Rental Bond Refunds — 2024</title>

  <!-- CSS -->
  <link rel="preconnect" href="https://unpkg.com" crossorigin>
  <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/15.7.1/nouislider.min.css">
  <link rel="stylesheet" href="./style.css">
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <h1>NSW Rental Bond Refunds — 2024</h1>
      <p class="subtle" id="intro">Postcode-level summary of NSW rental bond outcomes (2024). Sort and filter by withholding rates, tenancy length, total bond, and dwelling type to explore local patterns.</p>
    </div>
  </header>

  <main class="layout">
    <aside class="controls">
      <section class="card sort-card">
        <h2>Sort</h2>
        <div class="control-flex">
          <div class="control-block">
            <label>Sort by</label>
            <button class="help-tip" aria-label="Help">?</button>
            <span class="tooltip">Sorting also drives the map colours and ranking.</span>
            <select id="sortBy">
              <option value="percent">Percent of bond withheld from tenant</option>
              <option value="withheld">Percent of rentals with any bond withheld from tenant</option>
              <option value="days">Average tenancy length (days)</option>
              <option value="bond">Average total bond</option>
            </select>
          </div>
          <div class="control-block">
            <label>Direction</label>
            <select id="sortDir">
              <option value="asc">Ascending</option>
              <option value="desc">Descending</option>
            </select>
          </div>
        </div>
      </section>

      <section class="card">
        <h2>Filters</h2>
        <div class="control-block">
          <label>Dwelling type</label>
          <button class="help-tip" aria-label="Help">?</button>
          <span class="tooltip">Include one or more housing types (Flat/unit, House, Terrace/townhouse, Other, Unknown).</span>
          <div class="chips" id="dwellingTypes">
            <label><input type="checkbox" value="F" checked> Flat/unit</label>
            <label><input type="checkbox" value="H" checked> House</label>
            <label><input type="checkbox" value="T" checked> Terrace/townhouse</label>
            <label><input type="checkbox" value="O" checked> Other</label>
            <label><input type="checkbox" value="U" checked> Unknown</label>
          </div>
        </div>

        <div class="control-block">
          <label>Tenancy length (days)</label>
          <button class="help-tip" aria-label="Help">?</button>
          <span class="tooltip">Approximate tenancy length in days (bond remains lodged until the tenancy ends). Not a refund delay.</span>
          <div id="sliderDays"></div>
          <div class="range-vals">
            <input id="daysMin" type="number" step="1" placeholder="Min">
            <span>to</span>
            <input id="daysMax" type="number" step="1" placeholder="Max">
          </div>
        </div>

        <div class="control-block">
          <label>Data points per postcode</label>
          <button class="help-tip" aria-label="Help">?</button>
          <span class="tooltip">Minimum and maximum number of records contributing to a postcode. Default minimum is 20 to avoid tiny samples.</span>
          <div id="sliderCount"></div>
          <div class="range-vals">
            <input id="countMin" type="number" step="1" placeholder="Min">
            <span>to</span>
            <input id="countMax" type="number" step="1" placeholder="Max">
          </div>
        </div>

        <details class="advanced">
          <summary>More filters</summary>

          <div class="control-block">
            <label>Percent of bond withheld from tenant</label>
            <button class="help-tip" aria-label="Help">?</button>
            <span class="tooltip">Average proportion of the bond not returned to tenants.</span>
            <div id="sliderPercent"></div>
            <div class="range-vals">
              <input id="percentMin" type="number" step="0.1" placeholder="Min">
              <span>to</span>
              <input id="percentMax" type="number" step="0.1" placeholder="Max">
            </div>
          </div>

          <div class="control-block">
            <label>Percent of rentals with any bond withheld from tenant</label>
            <button class="help-tip" aria-label="Help">?</button>
            <span class="tooltip">Share of rentals where any amount was withheld.</span>
            <div id="sliderWithheld"></div>
            <div class="range-vals">
              <input id="withheldMin" type="number" step="0.1" placeholder="Min">
              <span>to</span>
              <input id="withheldMax" type="number" step="0.1" placeholder="Max">
            </div>
          </div>

          <div class="control-block">
            <label>Average total bond (AUD)</label>
            <button class="help-tip" aria-label="Help">?</button>
            <span class="tooltip">Average of Payment to Agent + Payment to Tenant.</span>
            <div id="sliderBond"></div>
            <div class="range-vals">
              <input id="bondMin" type="number" step="1" placeholder="Min">
              <span>to</span>
              <input id="bondMax" type="number" step="1" placeholder="Max">
            </div>
          </div>

        </details>

        <div class="control-actions">
          <button id="resetBtn">Reset filters</button>
        </div>
      </section>

      <section class="card">
        <h2>Summary</h2>
        <div id="summary"></div>
      </section>
    </aside>

    <section class="viz">
      <div id="map"></div>
      <section class="list card">
        <h2>Bond outcomes</h2>
        <div id="cards"></div>
      </section>
    </section>
  </main>

  <footer>
    <p>
      <button id="aboutBtn" class="linklike">About & licensing</button>
      <span class="sep">•</span>
      Code: <a href="./LICENSE">MIT</a>.
      Data: <a href="./data/LICENSE">sources & CC BY 4.0 attributions</a>.
      Third-party: <a href="./THIRD_PARTY_NOTICES.md">notices</a>.
      Map tiles © <a href="https://www.openstreetmap.org/copyright" target="_blank" rel="noopener">OpenStreetMap</a> contributors.
    </p>
  </footer>

  <div id="aboutModal" class="modal" aria-hidden="true" role="dialog" aria-labelledby="aboutTitle">
    <div class="modal-backdrop" data-close="1"></div>
    <div class="modal-dialog" role="document">
      <header class="modal-head">
        <h3 id="aboutTitle">About & licensing</h3>
        <button class="close" title="Close" aria-label="Close modal">×</button>
      </header>
      <div class="modal-body">
        <p><strong>Purpose.</strong> This map helps NSW renters explore where bonds are fully refunded or withheld.</p>
        <p><strong>Code licence.</strong> The site code is licensed under the <a href="./LICENSE" target="_blank" rel="noopener">MIT License</a>.</p>
        <p><strong>Data & attribution (CC BY 4.0 unless noted):</strong></p>
        <ul>
          <li>ABS ASGS 2021 <em>POA</em> boundaries — Digital boundary files.</li>
          <li>ASGS 2021 geographic correspondences — data.gov.au dataset.</li>
          <li>NSW Rental bond refunds — NSW Government bond data hub (e.g. 2024 workbook).</li>
        </ul>
        <p>See <a href="./data/LICENSE">data/LICENSE</a> for full wording. No endorsement by data providers is implied.</p>
      </div>
      <footer class="modal-foot">
        <button class="close primary">Close</button>
      </footer>
    </div>
  </div>

  <!-- JS -->
  <script defer src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/15.7.1/nouislider.min.js"></script>
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/wNumb/1.2.0/wNumb.min.js"></script>
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
  <script defer src="./app.js"></script>
</body>
</html>
